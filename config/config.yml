# Raspilapse Configuration File

# Camera Settings
camera:
  # Image resolution (width x height)
  # Common options for Camera V3:
  # - [4608, 2592] - Full 11.9MP
  # - [2304, 1296] - 3MP binned
  # - [1920, 1080] - Full HD
  # - [1280, 720]  - HD
  resolution:
    width: 1920
    height: 1080

  # Image transforms
  transforms:
    horizontal_flip: false
    vertical_flip: false

  # Camera controls (optional, comment out for auto)
  controls:
    # Exposure time in microseconds (e.g., 20000 = 20ms)
    # exposure_time: 20000

    # Analogue gain (1.0 = normal)
    # analogue_gain: 1.0

    # Auto white balance enable
    # awb_enable: true

    # Manual colour gains (if awb disabled)
    # colour_gains: [1.5, 1.5]

    # Brightness (-1.0 to 1.0, 0 = normal)
    # brightness: 0.0

    # Contrast (0.0 to 2.0, 1.0 = normal)
    # contrast: 1.0

    # Autofocus mode (if supported):
    # 0 = Manual, 1 = Single AF, 2 = Continuous AF
    # af_mode: 2

# Output Settings
output:
  # Base directory for saved images
  directory: "test_photos"

  # Filename pattern (supports strftime formatting and counter)
  # Available placeholders:
  # - {timestamp} - ISO format timestamp
  # - {counter} - Sequential counter (4 digits, zero-padded)
  # - {name} - Project name
  # You can also use strftime directives like %Y%m%d_%H%M%S
  filename_pattern: "{name}_{timestamp}.jpg"
  #filename_pattern: "{name}_{counter}.jpg"

  # Project name (used in filename)
  project_name: "raspilapse"

  # Image quality (0-100, JPEG compression)
  # Higher = better quality, larger files
  quality: 75

  # Create subdirectories by date
  organize_by_date: false

  # Date format for subdirectories (if organize_by_date is true)
  date_format: "%Y-%m-%d"

# Timelapse Settings (for future timelapse.py script)
timelapse:
  # Interval between captures in seconds
  interval: 3

  # Total number of frames to capture (0 = unlimited)
  num_frames: 0

  # Stabilization delay after camera start (seconds)
  stabilization_delay: 2

# Adaptive Timelapse Settings (for auto_timelapse.py)
adaptive_timelapse:
  # Enable adaptive exposure based on light conditions
  enabled: true

  # Interval between captures in seconds
  interval: 30

  # Total number of frames to capture (0 = unlimited, runs continuously)
  num_frames: 0

  # Light level thresholds (based on calculated lux from metadata)
  # These values determine when to switch between day/night/transition modes
  light_thresholds:
    # Lux below this = night mode (long exposure)
    night: 10

    # Lux above this = day mode (normal exposure)
    day: 100

    # Between night and day = transition mode (gradual adjustment)
    # Automatically calculated between night and day thresholds

  # Night mode settings (for dark conditions - stars, aurora, etc.)
  night_mode:
    # Maximum exposure time in seconds (max 20 seconds to avoid star trails)
    max_exposure_time: 20.0

    # Minimum exposure time in seconds
    min_exposure_time: 1.0

    # Analogue gain (ISO equivalent)
    # Higher = brighter but more noise. Range: 1.0-8.0, recommended max: 4.0
    analogue_gain: 6

    # Use auto white balance in night mode
    awb_enable: false

    # Manual color gains if awb disabled (red, blue)
    colour_gains: [1.8, 1.5]

  # Day mode settings (for bright daylight conditions)
  day_mode:
    # Exposure time in seconds (auto if not specified)
    # exposure_time: 0.01  # 10ms

    # Analogue gain for daylight (lower = less noise)
    # Only used if exposure_time is set (manual mode)
    # analogue_gain: 1.0  # Commented out - let auto exposure handle this

    # Use auto white balance in day mode
    awb_enable: true

    # Brightness adjustment (-1.0 to 1.0)
    # Negative = darker, positive = brighter
    # 0.0 = no adjustment (camera default auto-exposure)
    # brightness: 0.0

  # Transition mode settings (dawn/dusk)
  transition_mode:
    # Gradually adjust between day and night settings
    # Based on calculated lux value
    smooth_transition: true

    # Analogue gain range for transition
    analogue_gain_min: 1.0
    analogue_gain_max: 2.5

  # Test shot settings (used to measure light levels)
  test_shot:
    # Take a test shot before each capture to measure light
    enabled: true

    # Test shot exposure time in seconds (quick test)
    exposure_time: 0.1

    # Test shot gain
    analogue_gain: 1.0

# System Settings
system:
  # Create output directory if it doesn't exist
  create_directories: true

  # Save metadata with each capture
  save_metadata: true

  # Metadata filename pattern
  metadata_filename: "{name}_{counter}_metadata.json"

# Logging Settings
logging:
  # Enable/disable logging
  enabled: true

  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"

  # Log file path (relative to project root)
  # Use {script} placeholder for script name
  log_file: "logs/{script}.log"

  # Log format
  # Available placeholders: %(asctime)s, %(name)s, %(levelname)s, %(message)s
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

  # Date format for timestamps
  date_format: "%Y-%m-%d %H:%M:%S"

  # Also log to console
  console: true

  # Maximum log file size in MB (0 = unlimited)
  max_size_mb: 10

  # Number of backup log files to keep
  backup_count: 5
